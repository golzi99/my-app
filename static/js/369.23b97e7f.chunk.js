"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[369],{369:(e,s,o)=>{o.r(s),o.d(s,{default:()=>S});var t=o(43);const l={descriptionBlock:"ProfileInfo_descriptionBlock__-b6rx",profileImg:"ProfileInfo_profileImg__LbHdN",contact:"ProfileInfo_contact__Y3JFV"};var r=o(488),i=o(579);const n=e=>{let[s,o]=(0,t.useState)(!1),[l,r]=(0,t.useState)(e.status);(0,t.useEffect)((()=>{r(e.status)}),[e.status]);return(0,i.jsx)("div",{children:e.isOwner?(0,i.jsx)("div",{children:s?(0,i.jsx)("div",{children:(0,i.jsx)("input",{onChange:e=>{r(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{o(!1),e.updateStatus(l)},value:l})}):(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Status: "}),(0,i.jsx)("span",{onDoubleClick:()=>{o(!0)},children:e.status||"-------------"})]})}):(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Status: "}),(0,i.jsx)("span",{children:e.status||"-------------"})]})})};var a=o(257);const u=function(e){let{profile:s}=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Full name:"})," ",s.fullName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Looking for a job:"})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"My professional skills:"})," ",s.lookingForAJobDescription]}),s.aboutMe&&(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"About me:"})," ",s.aboutMe]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Contact:"}),Object.entries(s.contacts).map((e=>{let[s,o]=e;return o?(0,i.jsxs)("div",{className:l.contact,children:[(0,i.jsxs)("b",{children:[s,":"]})," ",o]},s):null}))]})]})};var c=o(784),d=o(892);const h="ProfileDataCss_contact__m7RLo";const j=function(e){let{profile:s}=e;const o=(0,d.j7)();let t;return o.status&&(t=o.status.errors.map(((e,s)=>(0,i.jsx)("p",{children:e},s)))),(0,i.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"fullName",children:(0,i.jsx)("b",{children:"Full name: "})}),(0,c.F)("fullName","fullName","fullName","Full Name","input",o.values.fullName)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job:"}),(0,c.F)("checkbox","lookingForAJob","lookingForAJob","","",o.values.lookingForAJob)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lookingForAJobDescription",children:(0,i.jsx)("b",{children:"My professional skills: "})}),(0,c.F)("lookingForAJobDescription","lookingForAJobDescription","lookingForAJobDescription","Your professional skills...","textarea",o.values.lookingForAJobDescription)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"aboutMe",children:(0,i.jsx)("b",{children:"About me: "})}),(0,c.F)("aboutMe","aboutMe","aboutMe","About you...","textarea",o.values.aboutMe)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:(0,i.jsx)("b",{children:"Contacts:"})}),(0,i.jsx)("div",{children:Object.entries(s.contacts).map((e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:h,children:[(0,i.jsx)("label",{htmlFor:s,children:(0,i.jsxs)("b",{children:[s,": "]})}),(0,c.F)(s,"contacts."+s,"contacts."+s,s,"input",o.values.contacts[s])]},s)}))})]}),(0,i.jsx)("button",{type:"submit",children:"SAVE"}),t&&(0,i.jsx)("div",{children:t})]})};var x=o(336);function p(e){let{profile:s,status:o,updateStatus:c,isOwner:h,savePhoto:p,saveProfile:b}=e,[f,m]=(0,t.useState)(!1);const v=(0,d.Wx)({initialValues:{fullName:s.fullName,lookingForAJob:s.lookingForAJob,lookingForAJobDescription:s.lookingForAJobDescription,aboutMe:s.aboutMe,contacts:s.contacts},validationSchema:x.tc,onSubmit:async(e,s)=>{let o={fullName:e.fullName,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe,contacts:e.contacts};await b(o,s.setStatus),m(!1)}});if(!s)return(0,i.jsx)(r.A,{});return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:l.descriptionBlock,children:[(0,i.jsx)("div",{className:l.avatarEditable,children:h?(0,i.jsxs)("label",{role:"button",title:"Edit your profile photo",children:[(0,i.jsx)("input",{type:"file",accept:"image/png, image/jpeg",style:{display:"none"},onChange:e=>{e.target.files.length&&p(e.target.files[0])}}),(0,i.jsx)("img",{className:l.profileImg,alt:"avatarProfile",src:s.photos.large||a})]}):(0,i.jsx)("img",{alt:"avatarProfile",src:s.photos.large||a})}),f?(0,i.jsx)(d.QI,{value:v,children:(0,i.jsx)(j,{profile:s,setEditMode:m})}):(0,i.jsx)(u,{profile:s}),(0,i.jsx)(n,{status:o,isOwner:h,updateStatus:c}),h&&!f&&(0,i.jsx)("button",{onClick:()=>{m(!0)},children:"Edit"})]})})}var b=o(977),f=o(3);const m="MyPosts_postsBlock__I7V0T",v="MyPosts_postList__aMUU1",g="Post_item__nW+I8";function k(e){return(0,i.jsxs)("div",{className:g,children:[(0,i.jsx)("img",{alt:"Avatar",src:e.profilePhoto||a}),e.message,(0,i.jsx)("div",{children:(0,i.jsxs)("span",{children:["Like ",e.likesCount]})})]})}var F=o(768);const P=t.memo((e=>{let s=e.postsData.map((s=>(0,i.jsx)(k,{message:s.message,likesCount:s.likesCount,profilePhoto:e.profilePhoto},s.id)));return(0,i.jsxs)("div",{className:m,children:[(0,i.jsx)("h3",{children:"My posts"}),(0,i.jsx)("div",{children:(0,i.jsx)(F.T,{})}),(0,i.jsx)("div",{className:v,children:s})]})}));const A=(0,f.Ng)((e=>({postsData:e.profilePage.postsData,profilePhoto:e.profilePage.profile.photos.small})),(e=>({addPost:s=>{e((0,b.oL)(s))}})))((function(e){return(0,i.jsx)(d.l1,{initialValues:{newTextBody:""},validationSchema:x.__,onSubmit:s=>{e.addPost(s.newTextBody),s.newTextBody=""},children:(0,i.jsx)(P,{...e})})}));var y=o(216);function _(e){return e.isOwner&&!e.isAuth?(0,i.jsx)(y.C5,{to:"/login"}):(0,i.jsx)("div",{children:e.profile?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p,{profile:e.profile,status:e.status,isOwner:e.isOwner,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,i.jsx)(A,{})]}):(0,i.jsx)(r.A,{})})}const S=(0,o(923).Zz)((0,f.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{getUserProfile:b.VM,getStatus:b.BS,updateStatus:b.yB,savePhoto:b.Ah,saveProfile:b.Lt}))((function(e){const s=(0,y.Zp)(),o=(0,y.g)();let l=o.userId;return l||(l=e.authorizedUserId),(0,t.useEffect)((()=>{l?(e.getUserProfile(l),e.getStatus(l)):s("/login")}),[l]),(0,i.jsx)("div",{children:(0,i.jsx)(_,{isAuth:e.isAuth,profile:e.profile,status:e.status,isOwner:!o.userId,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile})})}))},336:(e,s,o)=>{o.d(s,{LS:()=>l,RB:()=>i,__:()=>r,tc:()=>n});var t=o(899);const l=t.Ik().shape({email:t.Yj().email("Invalid email").required("Required email"),password:t.Yj().required("Required password"),captcha:t.Yj().when("captchaUrl",{is:!0,then:t.Yj().required("Required captcha symbols")})}),r=t.Ik().shape({newTextBody:t.Yj().max(100,"Too Long!").required("Required")}),i=t.Ik().shape({newTextBody:t.Yj().required("Required")}),n=t.Ik().shape({facebook:t.Yj().url("Wrong url!").nullable(),website:t.Yj().url("Wrong url!").nullable(),vk:t.Yj().url("Wrong url!").nullable(),twitter:t.Yj().url("Wrong url!").nullable(),instagram:t.Yj().url("Wrong url!").nullable(),youtube:t.Yj().url("Wrong url!").nullable(),github:t.Yj().url("Wrong url!").nullable(),mainLink:t.Yj().url("Wrong url!").nullable()})},768:(e,s,o)=>{o.d(s,{T:()=>i});const t={sendMessageBox:"PostSmtFormCss_sendMessageBox__CaGjP"};o(43);var l=o(892),r=o(579);function i(){const e=(0,l.j7)();let s=e.touched.newTextBody&&e.errors.newTextBody;return(0,r.jsx)("div",{className:t.sendMessageBox,children:(0,r.jsxs)(l.lV,{children:[(0,r.jsx)(l.D0,{type:"textarea",id:"newTextBody",name:"newTextBody",placeholder:"Enter your message",component:"textarea"}),s?(0,r.jsx)("div",{children:e.errors.newTextBody}):null,(0,r.jsx)("button",{type:"submit",children:"Send"})]})})}},784:(e,s,o)=>{o.d(s,{F:()=>r});var t=o(892),l=o(579);const r=(e,s,o,r,i,n)=>{let a;return"checkbox"===e&&(a=n),(0,l.jsx)("div",{children:(0,l.jsx)(t.D0,{type:e,id:s,name:o,placeholder:r,value:n||"",checked:a,component:i})})}}}]);
//# sourceMappingURL=369.23b97e7f.chunk.js.map