"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[676],{676:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(43);const i={descriptionBlock:"ProfileInfo_descriptionBlock__-b6rx",backgroundProfile:"ProfileInfo_backgroundProfile__JQYjh"};var o=t(364),r=t(579);const n=e=>{let[s,t]=(0,a.useState)(!1),[i,o]=(0,a.useState)(e.status);(0,a.useEffect)((()=>{o(e.status)}),[e.status]);return(0,r.jsx)("div",{children:s?(0,r.jsx)("div",{children:(0,r.jsx)("input",{onChange:e=>{o(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),e.updateStatus(i)},value:i})}):(0,r.jsx)("div",{children:(0,r.jsx)("span",{onDoubleClick:()=>{t(!0)},children:e.status||"-------------"})})})};function u(e){let{profile:s,status:t,updateStatus:a}=e;return s?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:i.backgroundProfile}),(0,r.jsxs)("div",{className:i.descriptionBlock,children:[s.photos.large?(0,r.jsx)("img",{alt:"avatarProfile",src:s.photos.large}):(0,r.jsx)("img",{alt:"avatarProfile",src:"/img/no-profile-picture-icon.png"}),(0,r.jsx)(n,{status:t,updateStatus:a})]})]}):(0,r.jsx)(o.A,{})}var d=t(977),l=t(3);const c="MyPosts_postsBlock__I7V0T",p="MyPosts_postList__aMUU1",x="Post_item__nW+I8";function h(e){return(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("img",{alt:"Avatar",src:"/img/no-profile-picture-icon.png"}),e.message,(0,r.jsx)("div",{children:(0,r.jsxs)("span",{children:["Like ",e.likesCount]})})]})}var j=t(768);const f=a.memo((e=>{let s=e.postsData.map((e=>(0,r.jsx)(h,{message:e.message,likesCount:e.likesCount},e.id)));return(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("h3",{children:"My posts"}),(0,r.jsx)("div",{children:(0,r.jsx)(j.T,{})}),(0,r.jsx)("div",{className:p,children:s})]})}));var g=t(892),m=t(336);const v=(0,l.Ng)((e=>({postsData:e.profilePage.postsData})),(e=>({addPost:s=>{e((0,d.oL)(s))}})))((function(e){return(0,r.jsx)(g.l1,{initialValues:{newTextBody:""},validationSchema:m.__,onSubmit:s=>{e.addPost(s.newTextBody),s.newTextBody=""},children:(0,r.jsx)(f,{...e})})}));var _=t(216);function B(e){return"/ProfileInfo"!==e.location||e.isAuth?(0,r.jsx)("div",{children:e.profile?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{isAuth:e.isAuth,location:e.location,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),(0,r.jsx)(v,{})]}):(0,r.jsx)(o.A,{})}):(0,r.jsx)(_.C5,{to:"/Login"})}const y=(0,t(923).Zz)((0,l.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{getUserProfile:d.VM,getStatus:d.BS,updateStatus:d.yB}))((function(e){let s=(0,_.zy)().pathname;const t=(0,_.Zp)();let{userId:i}=(0,_.g)();return i||(i=e.authorizedUserId),(0,a.useEffect)((()=>{i?(e.getUserProfile(i),e.getStatus(i)):t("/Login")}),[i]),(0,r.jsx)("div",{children:(0,r.jsx)(B,{isAuth:e.isAuth,location:s,profile:e.profile,status:e.status,updateStatus:e.updateStatus})})}))},336:(e,s,t)=>{t.d(s,{Ko:()=>i,RB:()=>r,__:()=>o});var a=t(899);const i=a.Ik().shape({email:a.Yj().email("Invalid email").required("Required email"),password:a.Yj().required("Required password")}),o=a.Ik().shape({newTextBody:a.Yj().max(100,"Too Long!").required("Required")}),r=a.Ik().shape({newTextBody:a.Yj().required("Required")})},768:(e,s,t)=>{t.d(s,{T:()=>r});const a={sendMessageBox:"PostSmtFormCss_sendMessageBox__CaGjP"};t(43);var i=t(892),o=t(579);function r(){const e=(0,i.j7)();let s=e.touched.newTextBody&&e.errors.newTextBody;return(0,o.jsx)("div",{className:a.sendMessageBox,children:(0,o.jsxs)(i.lV,{children:[(0,o.jsx)(i.D0,{type:"textarea",id:"newTextBody",name:"newTextBody",placeholder:"Enter your message",component:"textarea"}),s?(0,o.jsx)("div",{children:e.errors.newTextBody}):null,(0,o.jsx)("button",{type:"submit",children:"Send"})]})})}}}]);
//# sourceMappingURL=676.c4d1492a.chunk.js.map