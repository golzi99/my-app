"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[676],{676:(e,s,t)=>{t.r(s),t.d(s,{default:()=>P});var a=t(43);const r={descriptionBlock:"ProfileInfo_descriptionBlock__-b6rx",backgroundProfile:"ProfileInfo_backgroundProfile__JQYjh"};var o=t(488),i=t(579);const n=e=>{let[s,t]=(0,a.useState)(!1),[r,o]=(0,a.useState)(e.status);(0,a.useEffect)((()=>{o(e.status)}),[e.status]);return(0,i.jsx)("div",{children:s?(0,i.jsx)("div",{children:(0,i.jsx)("input",{onChange:e=>{o(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),e.updateStatus(r)},value:r})}):(0,i.jsx)("div",{children:(0,i.jsx)("span",{onDoubleClick:()=>{t(!0)},children:e.status||"-------------"})})})};var u=t(257);function d(e){let{profile:s,status:t,updateStatus:a}=e;return s?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r.backgroundProfile}),(0,i.jsxs)("div",{className:r.descriptionBlock,children:[s.photos.large?(0,i.jsx)("img",{alt:"avatarProfile",src:s.photos.large}):(0,i.jsx)("img",{alt:"avatarProfile",src:u}),(0,i.jsx)(n,{status:t,updateStatus:a})]})]}):(0,i.jsx)(o.A,{})}var l=t(977),c=t(3);const x="MyPosts_postsBlock__I7V0T",p="MyPosts_postList__aMUU1",h="Post_item__nW+I8";function j(e){return(0,i.jsxs)("div",{className:h,children:[(0,i.jsx)("img",{alt:"Avatar",src:u}),e.message,(0,i.jsx)("div",{children:(0,i.jsxs)("span",{children:["Like ",e.likesCount]})})]})}var f=t(768);const m=a.memo((e=>{let s=e.postsData.map((e=>(0,i.jsx)(j,{message:e.message,likesCount:e.likesCount},e.id)));return(0,i.jsxs)("div",{className:x,children:[(0,i.jsx)("h3",{children:"My posts"}),(0,i.jsx)("div",{children:(0,i.jsx)(f.T,{})}),(0,i.jsx)("div",{className:p,children:s})]})}));var g=t(892),v=t(336);const _=(0,c.Ng)((e=>({postsData:e.profilePage.postsData})),(e=>({addPost:s=>{e((0,l.oL)(s))}})))((function(e){return(0,i.jsx)(g.l1,{initialValues:{newTextBody:""},validationSchema:v.__,onSubmit:s=>{e.addPost(s.newTextBody),s.newTextBody=""},children:(0,i.jsx)(m,{...e})})}));var B=t(216);function y(e){return"/ProfileInfo"!==e.location||e.isAuth?(0,i.jsx)("div",{children:e.profile?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{isAuth:e.isAuth,location:e.location,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),(0,i.jsx)(_,{})]}):(0,i.jsx)(o.A,{})}):(0,i.jsx)(B.C5,{to:"/Login"})}const P=(0,t(923).Zz)((0,c.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{getUserProfile:l.VM,getStatus:l.BS,updateStatus:l.yB}))((function(e){let s=(0,B.zy)().pathname;const t=(0,B.Zp)();let{userId:r}=(0,B.g)();return r||(r=e.authorizedUserId),(0,a.useEffect)((()=>{r?(e.getUserProfile(r),e.getStatus(r)):t("/Login")}),[r]),(0,i.jsx)("div",{children:(0,i.jsx)(y,{isAuth:e.isAuth,location:s,profile:e.profile,status:e.status,updateStatus:e.updateStatus})})}))},336:(e,s,t)=>{t.d(s,{Ko:()=>r,RB:()=>i,__:()=>o});var a=t(899);const r=a.Ik().shape({email:a.Yj().email("Invalid email").required("Required email"),password:a.Yj().required("Required password")}),o=a.Ik().shape({newTextBody:a.Yj().max(100,"Too Long!").required("Required")}),i=a.Ik().shape({newTextBody:a.Yj().required("Required")})},768:(e,s,t)=>{t.d(s,{T:()=>i});const a={sendMessageBox:"PostSmtFormCss_sendMessageBox__CaGjP"};t(43);var r=t(892),o=t(579);function i(){const e=(0,r.j7)();let s=e.touched.newTextBody&&e.errors.newTextBody;return(0,o.jsx)("div",{className:a.sendMessageBox,children:(0,o.jsxs)(r.lV,{children:[(0,o.jsx)(r.D0,{type:"textarea",id:"newTextBody",name:"newTextBody",placeholder:"Enter your message",component:"textarea"}),s?(0,o.jsx)("div",{children:e.errors.newTextBody}):null,(0,o.jsx)("button",{type:"submit",children:"Send"})]})})}}}]);
//# sourceMappingURL=676.31337713.chunk.js.map