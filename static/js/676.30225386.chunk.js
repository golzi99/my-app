"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[676],{676:(e,s,t)=>{t.r(s),t.d(s,{default:()=>B});var a=t(43);const r={descriptionBlock:"ProfileInfo_descriptionBlock__-b6rx",profileImg:"ProfileInfo_profileImg__LbHdN"};var i=t(488),o=t(579);const n=e=>{let[s,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)(e.status);(0,a.useEffect)((()=>{i(e.status)}),[e.status]);return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",{children:(0,o.jsx)("input",{onChange:e=>{i(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),e.updateStatus(r)},value:r})}):(0,o.jsx)("div",{children:(0,o.jsx)("span",{onDoubleClick:()=>{t(!0)},children:e.status||"-------------"})})})};var l=t(257);function d(e){let{profile:s,status:t,updateStatus:a,isOwner:d,savePhoto:u}=e;if(!s)return(0,o.jsx)(i.A,{});return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:r.descriptionBlock,children:[(0,o.jsx)("div",{className:r.avatarEditable,children:d?(0,o.jsxs)("label",{role:"button",title:"Edit your profile photo",children:[(0,o.jsx)("input",{type:"file",accept:"image/png, image/jpeg",style:{display:"none"},onChange:e=>{e.target.files.length&&u(e.target.files[0])}}),(0,o.jsx)("img",{className:r.profileImg,alt:"avatarProfile",src:s.photos.large||l})]}):(0,o.jsx)("img",{alt:"avatarProfile",src:s.photos.large||l})}),(0,o.jsx)(n,{status:t,updateStatus:a})]})})}var u=t(977),c=t(3);const p="MyPosts_postsBlock__I7V0T",x="MyPosts_postList__aMUU1",h="Post_item__nW+I8";function j(e){return(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)("img",{alt:"Avatar",src:l}),e.message,(0,o.jsx)("div",{children:(0,o.jsxs)("span",{children:["Like ",e.likesCount]})})]})}var f=t(768);const g=a.memo((e=>{let s=e.postsData.map((e=>(0,o.jsx)(j,{message:e.message,likesCount:e.likesCount},e.id)));return(0,o.jsxs)("div",{className:p,children:[(0,o.jsx)("h3",{children:"My posts"}),(0,o.jsx)("div",{children:(0,o.jsx)(f.T,{})}),(0,o.jsx)("div",{className:x,children:s})]})}));var m=t(892),v=t(336);const _=(0,c.Ng)((e=>({postsData:e.profilePage.postsData})),(e=>({addPost:s=>{e((0,u.oL)(s))}})))((function(e){return(0,o.jsx)(m.l1,{initialValues:{newTextBody:""},validationSchema:v.__,onSubmit:s=>{e.addPost(s.newTextBody),s.newTextBody=""},children:(0,o.jsx)(g,{...e})})}));var y=t(216);function P(e){return e.isOwner&&!e.isAuth?(0,o.jsx)(y.C5,{to:"/Login"}):(0,o.jsx)("div",{children:e.profile?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d,{profile:e.profile,status:e.status,isOwner:e.isOwner,updateStatus:e.updateStatus,savePhoto:e.savePhoto}),(0,o.jsx)(_,{})]}):(0,o.jsx)(i.A,{})})}const B=(0,t(923).Zz)((0,c.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth})),{getUserProfile:u.VM,getStatus:u.BS,updateStatus:u.yB,savePhoto:u.Ah}))((function(e){const s=(0,y.Zp)(),t=(0,y.g)();let r=t.userId;return r||(r=e.authorizedUserId),(0,a.useEffect)((()=>{r?(e.getUserProfile(r),e.getStatus(r)):s("/Login")}),[r]),(0,o.jsx)("div",{children:(0,o.jsx)(P,{isAuth:e.isAuth,profile:e.profile,status:e.status,isOwner:!t.userId,updateStatus:e.updateStatus,savePhoto:e.savePhoto})})}))},336:(e,s,t)=>{t.d(s,{Ko:()=>r,RB:()=>o,__:()=>i});var a=t(899);const r=a.Ik().shape({email:a.Yj().email("Invalid email").required("Required email"),password:a.Yj().required("Required password")}),i=a.Ik().shape({newTextBody:a.Yj().max(100,"Too Long!").required("Required")}),o=a.Ik().shape({newTextBody:a.Yj().required("Required")})},768:(e,s,t)=>{t.d(s,{T:()=>o});const a={sendMessageBox:"PostSmtFormCss_sendMessageBox__CaGjP"};t(43);var r=t(892),i=t(579);function o(){const e=(0,r.j7)();let s=e.touched.newTextBody&&e.errors.newTextBody;return(0,i.jsx)("div",{className:a.sendMessageBox,children:(0,i.jsxs)(r.lV,{children:[(0,i.jsx)(r.D0,{type:"textarea",id:"newTextBody",name:"newTextBody",placeholder:"Enter your message",component:"textarea"}),s?(0,i.jsx)("div",{children:e.errors.newTextBody}):null,(0,i.jsx)("button",{type:"submit",children:"Send"})]})})}}}]);
//# sourceMappingURL=676.30225386.chunk.js.map